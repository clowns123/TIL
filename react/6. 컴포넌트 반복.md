```react
import React from 'react';

const IterationSample = () => {
  const names = ['눈사람', '얼음', '눈', '바람'];
  const nameList = names.map((name) => <li>{name}</li>);
  return <ul>{nameList}</ul>;
};

export default IterationSample;
import React from 'react';

const IterationSample = () => {
  return (
    <ul>
      <li>눈사람</li>
      <li>얼음</li>
      <li>눈</li>
      <li>바람</li>
    </ul>
  );
};

export default IterationSample;
```

위의 코드에서 li가 반복되는 것을 살펴볼 수 있다. 지금은 li하나만 반복되므로 별로 복잡해 보이지 않지만 코드의 양이 늘어나면 점점 더 복잡해진다. 이를 효율적으로 보여주고 관리하는 방법에 대해 알아보자.



# 1. 데이터 배열을 컴포넌트 배열로 변경하기

위에서 만들었던 li를 자바스크립트 배열로 저장하여 컴포넌트에 넣어보자

```react
import React from 'react';

const IterationSample = () => {
  const names = ['눈사람', '얼음', '눈', '바람'];
  const nameList = names.map((name) => <li>{name}</li>);
  return <ul>{nameList}</ul>;
};

export default IterationSample;
```

문자열로 된 배열을 선언 후 map으로 li를 만들어 주어서 ul에 넣어주었다. 이를 App.js에 컴포넌트를 렌더링 해서 확인해보면 li를 반복한 것과 똑같이 렌더링되는 것을 확인해 볼 수 있다.

하지만 개발자 도구를 확인해보면 key가 없다고 경고문구가 뜨는 것을 확인할 수 있다.

# 2 key

리액트에서는 key는 컴포넌트 배열을 렌더링했을 때 어떤 원소에 변동이 있는지 확인할려고 사용합니다.

 유동적인 데이터를 다룰 때 원소가 새로 생성, 제거, 수정이 자주 일어나므로 key가 없을 때 가상돔을 비교하는 과정에서 리스트를 순차적으로 비교하면서 변화를 감지하지만 key가 있다면 어떤 변화가 있는지 빠르게 알아낼 수 있습니다.

보통은 데이터가 가진 고윳값을 key 값으로 설정해야 하지만 지금 만든 배열은 단순한 문자 배열이므로 고유 번호가 없다. 이때는 map 함수에 전달되는 콜백 함수의 인수인 index 값을 사용하면 됩니다.

```react
...
<li key={index}>{name}</li>
...
```

이제 개발자 도구에서 더 이상 경고 메시지를 표시하지 않습니다.



# 3. 응용

## 3.1 기본 컴포넌트

지금까지 배운 개념을 응용하여 고정된 배열을 렌더링하는 것이 아닌 동적인 배열을 렌더링하는 것을 구현해보자.

```react
import React, { useState } from 'react';

const IterationSample = () => {
  const [names, setNames] = useState([
    { id: 1, text: '눈사람' },
    { id: 2, text: '얼음' },
    { id: 3, text: '눈' },
    { id: 4, text: '바람' },
  ]);
  const [inputText, setInputText] = useState('');
  const [nextId, setNextId] = useState(5);
  const nameList = names.map((name) => (
    <li key={name.id}>{name.text}</li>
  ));
  return <ul>{nameList}</ul>;
};

export default IterationSample;
```

단순한 텍스트 배열을 객체 배열로 바꿔서 key값으로 사용할 수 있는 고윳값인 id를 넣어주었다.



## 3.2 데이터 추가

```react
import React, { useState } from 'react';

const IterationSample = () => {
  const [names, setNames] = useState([
    { id: 1, text: '눈사람' },
    { id: 2, text: '얼음' },
    { id: 3, text: '눈' },
    { id: 4, text: '바람' },
  ]);
  const [inputText, setInputText] = useState('');
  const [nextId, setNextId] = useState(5);
  const onChange = (e) => setInputText(e.target.value);
  const onClick = (e) => {
    const nextNames = [
      ...names,
      {
        id: nextId,
        text: inputText,
      },
    ];

    setNextId(nextId + 1);
    setNames(nextNames);
    setInputText('');
  };

  const nameList = names.map((name) => (
    <li key={name.id}>{name.text}</li>
  ));
  return (
    <>
      <input value={inputText} onChange={onChange} />
      <button onClick={onClick}>추가</button>
      <ul>{nameList}</ul>;
    </>
  );
};

export default IterationSample;
```

