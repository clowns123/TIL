# 1. React를 배우는 이유

프론트엔드 프레임워크 3대장이라 하면 보통 React, Angular, Vue라고 하는데 이 중 무엇을 먼저 배워야 할까?

그 전에 바닐라 자바스크립트를 사용하지 않고 굳이 프레임워크를 찾아서 사용하는 이유를 알아보자



## 1.1 프론트엔드 프레임워크의 역할

자바스크립트의 프레임워크는 위의 3대장을 제외하고도 Backbone.js, Derby.js Ember.js 등등 많은 프레임워크들이 존재한다. 이 모든 프레임워크들은 순수한 자바스크립트만으로는 규모가 큰 애플리케이션을 개발할 때 구조를 관리하려면 힘들어지기 때문에 만들어지게 된것이다.



## 1.2 프론트엔드 프레임워크의 구조

위에서 설명한 프레임워크들은 주로 MVC(Model-View-Controller) 아키텍쳐, MVVM(Model-View-View-Model)아키텍쳐를 사용한다. 3대장 중 하나인 Angular의 경우는 MVW(Model-View-Wharever) 아키텍쳐를 사용하여 애플리케이션를 구조화한다.

MVC, MVVM, MVW 등과 같은 여러 구조들의 공통점을 찾아보면 모두 모델(Model)과 뷰(View)가 있다는 것이다. 이때 모델은 애플리케이션에서 사용하는 데이터를 관리하는 영역이고, 뷰는 사용자에게 보이는 부분이다. 

예를 들어 프로그램이 사용자에게 어떤 작업을 받으면 **컨트롤러는 모델 데이터를 조회하거나 수정**하고, 변경된 사항을 **뷰에 반영**한다.



## 1.3 React가 만들어진 이유

만약 아래와 같은 JSON 객체 값을 사용하는 뷰가 있다고 생각해보자

```json
{
    "title": "Hello",
    "contents" : "Hello World",
    "author" : "clown",
	"likes" : "1"
}
```

```html
<div id="post-1">
    <div class="title">Hello</div>
    <div class="content">Hello World</div>
	<div class="author">clown</div>
    <div class="likes">1</div>
</div>
```

여기서 likes의 값을 2로 업데이트를 한다면 애플리케이션에서 post-1를 찾고 likes 요소를 찾아 내부를 수정해야 한다. 간단한 어플리케이션이면 간단하겠지만 규모가 큰 애플리케이션의 경우는 상당히 복잡해지고 제대로 관리하지 않을 경우 성능도 많이 떨어지게 된다.

페이스북 개발 팀은 이를 해결하려고 하나의 아이디어를 고안했는데, 어떤 데이터가 변할 때마다 어떤 변화를 줄지 고민하는게 아닌 그냥 **기존 뷰를 날려 버리고 처음부터 새로 렌더링을 하는 방식**이다. 이렇게 할 경우 애플리케이션 구조가 간단해지고 작성해야 할 코드양도 많이 줄어들게 된다. 더 이상 어떻게 변화를 줄지 신경 쓸 필요가 없고, 그저 뷰가 어떻게 생길지 선언하며, 데이터에 변화가 있으면 기존에 있던 것은 버리고 정해진 규칙에 따라 렌더링하면 된다. 

하지만 듣다보면 한가지 의문이 생길것이다. 데이터에 변화가 있을때마다 지우고 다시 그리면 성능에 문제는 생기지 않을까? 페이스북 개발팀은 위에 설명한 방식을 이용하지만 최대한 성능을 아끼고 편안한 사용자 경험을 제공하고자 만든 것이 React이다.



## 1.4 React의 이해

React가 만들어진 이유는 알게 되었다. 이제 페이스북 개발팀이 어떤식으로 React를 구현했는지 알아보자.

React의 경우는 위에서 설명한 프론트엔드 프레임워크의 구조와 다르게 오직 V(View)만 신경 쓰는 라이브러리이다.

리엑트 프로젝트에서 특정 부분이 어떻게 생길지 정하는 선언체가 있는데, 이를 컴포넌트(Component)라고 한다. 컴포넌트는 다른 프레임워크에서 사용자 인터페이스를 다룰 때 사용하는 템플릿과는 다른 개념이다.

템플릿은 보통 데이터셋이 주어지면 HTML 태그 형식을 문자열로 반환하는데, 이와 달리 컴포넌트는 좀 더 복합적인 개념이다. 컴포넌트는 재사용이 가능한 API로 수많은 기능들을 내장하고 컴포넌트 하나에서 해당 컴포넌트의 생김새와 작동 방식을 정의한다.

React는 이 컴포넌트를 리렌더링 하는 과정을 어떠한 방식으로 성능을 아끼는 걸까?

---

### 1.4.1 초기 렌더링

어떤 UI 관련 프레임워크, 라이브러리를 사용하든지 간에 맨 처음 어떻게 보일지를 정하는 초기 렌더링이 필요하다. 리액트에서는 이를 다루는 render 함수가 있다.

render() 함수는 컴포넌트가 어떻게 생겼는지 정의하는 역할을 합니다. 이 함수는 html 형식의 문자열을 반환하지 않고 뷰가 어떻게 생겼고 어떻게 동작하는지에 대한 정보를 지닌 **객체**를 반환합니다. 이떄 컴포넌트는 또다른 컴포넌트가 들어갈 수 있기 때문에 render함수를 실행하면 함수 내부에 있는 컴포넌트들도 재귀적으로  렌더링합니다. 이렇게 최상위 컴포넌트의 렌더링 작업이 끝나면 지니고 있는 정보를 사용하여 HTML 마크업을 만들고, 이를 우리가 정하는 실제 페이지의 DOM 요소 안에 주입합니다.

컴포넌트를 실제 페이지에 렌더링할 때는 분리된 두 가지 절차를 따르게 되는데 먼저 문자열 HTML 코드를 생성한 후 특정 DOM에서 해당 내용을 주입하면 이벤트가 적용됩니다.

### 1.4.2 조화 과정

리액트 라이브러리에서 중요한 부분인 업데이트를 어떻게 진행하는지 알아보자

우선 리액트에서 뷰를 업데이트할 때는 **업데이트 과정을 거친다**라고 하기보다는 **조화(reconciliation)을 거친다**라고 하는 것이 더 정확한 표현입니다.

그 이유는 컴포넌트에서 데이터 변화가 있을 때 우리가 보기에는 뷰가 변경되는 것처럼 보이지만, 사실은 새로운 요소로 갈아 끼우기 때문이다. 이 작업 또한 render 함수가 한다.

render함수는 뷰가 어떻게 생겼고 어떻게 작동하는지 **객체**를 반환한다고 했다. 컴포넌트는 데이터를 업데이트했을 때 단순히 업데이트한 값을 수정하는 것이 아니라 새로운 데이터를 가지고 render 함수를 또 다시 호출하여 뷰를 새롭게 생성한다.

하지만 이때 새롭게 만들어진 뷰를 바로 DOM에 반영하지 않고 이전 render함수가 만든 컴포넌트와 새롭게 만들어진 컴포넌트를 비교 후 바뀐 부분만 DOM에 반영을 하므로 최소한의 자원을 가지고 리렌더링을 한다.

---



## 1.5 리액트의 특징

### 1.5.1 Virtual DOM

리액트의 주요 특징 중 하나는 Virtual DOM을 사용하는 것입니다.

Virtual DOM을 알아보기 전에 DOM을 먼저 알아보자.

### 1.5.2 DOM이란?

DOM이란 Document Object Model의 약어로 즉 객체로 문서 구조를 표현하는 방법이다. 보통XML이나 HTML으로 작성한다.

웹 브라우저는 DOM을 활용하여 객체에 자바스크립트와 css를 정용한다. DOM은 트리 형태라서 특정 노드를 찾거나 수정하거나 제거하거나 원하는 곳에 삽입할 수 잇다.

> **DOM은 과연 느릴까?**
>
> DOM에는 한가지 치명적인 문제점이 있다. 바로 동적 UI에 최적화되어 있지 않다는 것이다. 
>
> HTML은 자체적으로 정적이기 떄문에 자바스크립트를 이용하여 동적으로 만들어준다.
>
> 요즘 흔히 접하는 큰 규모의 웹 어플리케이션 예를들어 페이스북이나 트위터를 보면 스크롤바를 내릴 수록 수많은 데이터가 무한정  로딩된다.  그리고 각 데이터를 표현하는 요소(element)들이 있는데 이 수가 많아지면 DOM에 직적 접근하여 변화를 주면 느려지기 시작한다.
>
> 하지만 이를보고 DOM이 느리다고 하면 정확한 표현이 아니다. DOM 자체는 충분히 빠르고 DOM 자체의 성능은 자바스크립트 객체를 처리할 떄의 성능과 비슷하다. 단 브라우저에서 DOM에 변화가 일어날 때 마다 css를 다시 연산하고 레이아웃을 구성하고 페이지를 리페인트 하기 때문에 느려보일 뿐이다.

DOM을 자주 조작하면 성능이 저하될 수 있기 떄문에 최소한으로 조작해야 하는데 리액트에서는 이를 Virtual DOM 방식을 사용하여 DOM 업데이트를 추상화함으로써 DOM 조작을 최소화하고 효율적으로 진행한다.

### 1.5.2 Virtual DOM

Virtual DOM을 사용하면 실제 DOM에 접근하여 조작하는 대신, 이를 추상화한 자바스크립트 객체를 구성하여 사용한다. 간단히 생각하여 가벼운 DOM 사본을 사용한다 생각하자

리액트에서 데이터가 변하여 웹 브라우저에 실제 DOM을 업데이트 하는 과정을 살펴보자

1. 데이터를 업데이트하면 전체 UI를 Virtual DOM에 리렌더링한다
2. 이전 Virtual DOM에 있던 내용과 현재 내용을 비교한다.
3. 바뀐 부분만 실제 DOM에 적용한다.

이떄 주의해야 할 점은 Virtual DOM을 사용한다고 무조건 빨라지는 것은 아니다. 리액트 메뉴얼에는 다음과 같은 말이 적혀있다.

**우리는 다음 문제를 해결하려고 리액트를 만들었습니다. 지속적으로 데이터가 변화하는 대규모 애플리케이션 구축하기**

결국 적절한 곳에 리액트를 사용해야 성능이 좋아지는것이다.  간단한 사이트나 데이터가 많이 변화하지 않는 사이트의 경우는 리액트를 사용하는게 성능에 악영향을 줄 수 있다.

리액트와 Virtual DOM에서 언제나 제공할 수 잇는 것은 바로 업데이트 처리 간결성입니다. UI를 업데이트하는 과정에서 생기는 복잡함을 모두 해소하고 더욱 쉽게 업데이트에 접근할 수 있습니다.



## 1.6 기타 특징

다른 웹 프레임워크와 다르게 리액트는 오직 뷰만 담당합니다. 또한 리액트는 프레임워크가 아닌 라이브러리이다.

즉 다른 기능 Ajax, 데이터 모델링, 라우팅 등과 같은 기능이 없기 때문에 직접 구현해서 사용해야 한다.

이때 라우팅에는 리액트 라우터, Ajax는 axios, fetch, 상태 관리에는 리덕스나 MobX를 사용하여 빈 자리를 채우면 된다. 이는 자신의 마음에 드는 라이브러리를 사용할 수 있다는 장점이 될수도 있지만 많은 라이브러리를 접해야 한다는 단점도 있다.

또한 리액트는 라이브러리이기 때문에 다른 프론트엔드 프레임워크와 혼용하여 사용이 가능하다.



# 2. 리액트 시작

기본적으로 자바스크립트를 공부하던 사람이라면 Node.js, 텍스트 에디터, git 등 개발에 필요한 도구들은 대부분 구성되어 있을 것 이다. 그렇다면 간단하게 리액트 프로젝트를 만들어 보겠다.

```bash
npm init react-app <프로젝트 이름>
yarn create react-app <프로젝트 이름>
```

프로젝트 생성이 완료 된 후 

```bash
cd <프로젝트 이름>
npm start #또는 yarn start
```

위의 코드를 실행하면 개발 서버가 켜지게 되고 페이지가 자동으로 켜지게 되고 페이지가 켜지게 된다.

만약 켜지지 않으면 브라우저에 해당 url을 입력하여 직접 들어간다

- http://localhost:3000/



이제 리액트를 마음껏 살펴보자









