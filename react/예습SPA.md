# 1. SPA란?

SPA는 Single Page Application의 약어입니다. 말 그대로 한 개의 페이지로 이루어진 애플리케이션입니다.

전통적인 웹 페이지는 여러 페이지로 구성되어 있고 페이지를 이동할 때 마다 서버에 리소스를 요청해서 렌더링하는 작업을 반복합니다. 즉  사용자에게 보이는 화면은 서버 측에서 준비했습니다.

최근에는 웹에서 제공되는 정보가 정말 많기 때문에 새로운 화면을 보여 주어야 할 때마다 서버에서 모든 뷰를 준비하면 성능상에 문제가 있을 수도 있고 트래픽이 몰려 부하가 갈 수 있습니다. 또한 사용자와의 인터랙션이 자주 발생하는 모던 웹 애플리케이션에는 적당하지 않을 수 있습니다. 

그래서 리액트같은 라이브러리, 프레임워크를 사용하여 뷰 렌더링을 사용자의 브라우저가 담당하도록 하고 사용자와의 인터랙션이 발생하면 필요한 부분만 업데이트 해주는 방식으로 합니다.

SPA라고 해서 페이지가 하나이진 않습니다. 서버에서 렌더링해주는 페이지가 한 종류이지만 해당 페이지로 다양한 화면을 보여줄 수 있습니다. 다른 주소에 다른 화면을 보여 주는 것을 **라우팅**이라고 합니다.

리액트 라우팅 라이브러리는 리액트 라우터, 리치 라우터, Next.js 등 여러가지가 있습니다만 가장 사용 빈도가 높은 리액트 라우터를 배워봅니다.

## 1.1 SPA의 단점

SPA의 단점은 앱의 규모가 커지면 자바스크립트 파일이 너무 커진다는 겁니다. 사용자가 실제 방문하지 않는 페이지의 스크립트도 불러오기 때문에 문제가 생기지만 나중에 **코드 스플리팅**을 통해 라우트별로 파일들을 나누어서 트래픽과 로딩 속도를 개선합니다.

또한 일반 크롤러들이 페이지의 정보를 제대로 수집해 가지 못한다는 잠재적인 단점이 있기 때문에 SEO 관점에서 문제가 있습니다. 그리고 자바스크립트가 로딩되어 실행된는 짧은 시간 동안 흰 페이지가 나타날 수 있다는 단점도 있습니다. 이 두가지 문제점은 서버 사이트 렌더링을 통해 해결할 수 있습니다.



# 2. 라우터의 기본적인 사용법

라이브러리 설치

- `yarn add react-router-dom`



라이브러리 사용법

- `<BrowserRouter></BrowserRouter>`

  - 해당 태그로 `<Route/>`를 감싸줍니다.

- `<Route/>`

  - path속성으로 주소를 입력합니다.
  - component로 path를 입력했을 시 보여줄 컴포넌트를 지정합니다.
  - exact를 입력하여 path가 완벽히 일치할 때만 보여줄 수 있게 만들 수 있습니다.
  - <Route path='/' component={Home} exact/>

- `<Link>`

  - 클릭할 경우 다른 주소로 이동시켜주는 컴포넌트이다.
    - a태그와 비슷한데 a태그는 페이지를 새로 불러오기 때문에 SPA와 맞지 않다.
  - `<Link to="주소">내용</Link>`

- `<Route/>`에 여러개의 path 지정하기

  - `<Route path={['/about', '/info']} component={About}`

- URL 파라미터와 쿼리

  - 유동적인 값을 전달하기 위해서 사용한다.

  - 파라미터 : `/profiles/test`

    - username 데이터를 보낼 때
      - `<Route path="/profile/:username"/>`
    - username을 profile컴포넌트에서 받을 때
      - `const { username } = match.params`

  - 쿼리 : `/about?details=true`

    - yarn add qs을 통해 qs라이브러리를 사용한다.

    - detail을 받을 때

      - ```react
        const query = qs.parse(location.search, {
            ignoerQueryPrefix: ture // 문자열 앞의 ? 생략
        })
        const detail = query.detail // true or false 문자열
        ```

## 2.1 서브 라우터

서브 라우트는 라우트 내부에 또 라우트를 정의하는 것을 의미합니다.

```react
<Route path="/profile" exact render={()=> <div>사용자를 선택하시오</div>} />
<Route path="/profile/:username" component={Profile}} />
```

Route에 component 대신 render을 넣어줄 수 있다. 따로 컴포넌트를 만들기 애매할 떄 넣어줘서 사영이 가능하다. 위의 코드를 실행하게 되면 profile로 들어가면 사용자를 선택하시오 username가 있으면 Profile 컴포넌트로 이동하게 된다.



# 3. 리액트 라우터 부가 기능

