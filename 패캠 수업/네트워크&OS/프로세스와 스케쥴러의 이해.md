# 운영체제

주요 운영체제 : 윈도우, 리눅스/유닉스, 맥OS, 안드로이드, IOS, TmaxOS...

OS는 정확히 따지자면 커널을 의미함 이용자는 Shell을 이용하여 커널과 소통함 이떄 GUI와 CUI가 있다. 

## 시스템 콜

운영체제는 응용 프로그램 인터페이스 제공 이를 시스템 콜이라 한다.

- 시스템 콜 또는 시스템 호출 인터페이스
- 운영체제가 운영체제 각 기능을 사용할 수 잇도록 시스템 콜이라는 명령 또는 함수를 제공

응용프로그램은 OS에게 시스템 콜을 이용하여 자원을 요청한다. 또한 대표적으로 파일을 다루는 프로그램은 시스템 콜을 이용을 해야한다.

언어마다 시스템 콜을 부르는 방법이 다르지만 결국 운영체제의 시스템 콜을 부르는 것이다.

### 가상머신

하지만 이를 귀찮게 여겨서 Java나 C#같은 언어는 가상머신을 통해 어떠한 운영체제든 돌아갈 수 있게 만든 언어가 자바나 C#이다.

### 실제 시스템 콜 예제

[리눅스 open](https://man7.org/linux/man-pages/man2/open.2.html)



## 안드로이드

안드로이드도 결국 리눅스 커널을 통해 만들어졌다.



## 운영체제를 만든다면?

운영체제를 만든다면? 

1. 운영체제를 개발한다. (kernel) 
2. 시스템콜을 개발 
3. 시스템콜 기반, 프로그래밍 언어별 라이브러리 개발(API) 
4. 지원되는 프로그래밍 언어로 Shell 프로그램 개발 
5. 지원되는 프로그래밍 언어로 응용 프로그램 개발



## CPU Protection Ring

- 사용자 모드 (user mode): 응용 프로그램이 사용 
- 커널 모드 (kernel mode): OS가 사용

명령어의 LV를 정해서 권한을 다르게 하는 것

어떤 명령어를 실행할 떄 해당 주소에 명령이 있는데 중간에 권한을 줘서 응용프로그램이 실행할 수 있는 명령어를 제한한다.



## 정리

- 운영체제는 시스템 콜 제공
- 프로그래밍 언어별 운영체제 지원을 위해, 운영체제 별 API 제공
- 응용 프로그램 개발시 운영체제 기능이 필요한 경우, 해당 API를 사용해서 프로그램 작성
- 응용 프로그램 실행시, 해당 API를 호출하면, 시스템 콜 호출, 커널 모드로 변경 후, OS내부에 해당 명령이 실행되고 응용 프로그램에 결과 리턴



# 프로세스 스케쥴링

## 배치 처리 시스템

- 여러 프로그램을 순차적으로 실행시킬 수 있도록 해주세요!
  - 어떤 프로그램은 실행이 너무 시간이 많이 걸려서 다른 프로그램이 실행하는데 시간을 많이 기다려야 한다.

## 시분할 시스템

- 시분할 시스템: 다중 사용자 지원을 위해 컴퓨터 응답 시간을 최소화하는 시스템 
  - 여러 사용자가 동시에 하나의 컴퓨터를 쓰려면 어떻게 해야 하나요? (다중 사용자 지원)

## 멀티 태스팅

- 멀티 태스킹: 단일 CPU에서, 여러 응용 프로그램이 동시에 실행되는 것처럼 보이도록 하는 시스템 나는 MP3 음악을 들으며, 문서 작성을 한다.
- 10 ~ 20 ms 단위로도 실행 응용 프로그램이 바뀜



> 멀티 시스템과 시분할 시스템의 차이점
>
> 시분할 시스템은 다중 사용자를 지원하고 싶고 멀티 캐스팅은 다중 프로그래밍을 지원하고 싶어했다.

## 멀티 프로그래밍

- 최대한 CPU를 많이 활용하도록 하는 시스템 
  - 응용 프로그램은 CPU외 다양한 하드웨어 사용 (파일 읽기)
  - 파일에서 데이터를 가져오는 동안 기다리면 cpu의 낭비가 심하기 떄문에 그동안 다른 작업을 한다.

### 프로세스 스케쥴러

멀티 프로그래밍을 사용할 떄 프로세스를 어떻게 실행하고 어떻게 값을 읽어올지 정해주는 방식

- running state : 현재 CPU에서 실행 상태
- ready state : CPU에서 실행 가능 상태
- block state : 특정 이벤트 발생 대기 상태

## 멀티 태스킹과 멀티 프로세싱

멀티 태스킹은 단일 CPU이고 멀티 프로세싱은 여러 CPU를 하나의 프로그램을 병렬로 실행하여 실행 속도를 극대화 시키는 것이다.



## 정리

- 시분할 시스템: 다중 사용자 지원, 컴퓨터 응답시간을 최소화하는 시스템 
- 멀티 태스킹: 단일 CPU에서 여러 응용 프로그램을 동시에 실행하는 것처럼 보이게 하는 시스템 
- 멀티 프로그래밍: 최대한 CPU를 일정 시간당 많이 활용하는 시스템 
- 멀티 프로세싱: 여러 CPU에서 하나의 응용 프로그램을 병렬로 실행해서, 실행속도를 높이는 기법